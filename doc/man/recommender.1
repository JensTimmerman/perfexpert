.Dd 7/29/13
.Dt recommender 1
.Os Linux
.Sh NAME
.Nm recommender
.Nd recommend possible optimizations
.Sh SYNOPSIS
.Nm
.Fl i|-f Ar inputfile
.Op Fl o Ar outputfile
.Op Fl a Ar workdir
.Op Fl r Ar count
.Op Fl d Ar database
.Op Fl m Ar metricsfile
.Op Fl l Ar level
.Op Fl chnv
.Sh DESCRIPTION
.Nm
is part of PerfExpert. It uses PerfExpert database to select possible optimizations for hot-spots
identified by analyzer(1). TODO: describe how  selection of optimization actually works.
.Sh OPTIONS
The following options are available:
.Bl -tag -width -indent
.It Fl i, -stdin
Use STDIN as input for performance measurements.
.It Fl f, -inputfile
Set the file from where performance measurements should be read.
.It Fl o, -outputfile
File to write possible optimizations (default: STDOUT). If the file exists the content will be
overwritten.
.It Fl a, -automatic
Enable automatic performance optimization and create files into a temporary directory (default: off) This
options is available only when PerfExpert is compiled with support to ROSE (http://rosecompiler.org/).
.It Fl r, -recommendations
Set the number of optimizations
.Nm
sould provide.
.It Fl d, -database
Full path and name of PerfExpert database file (default: PERFEXPERT_VARDIR/RECOMMENDATION_DB).
.It Fl m, -metricsfile
Choose a different set of performance metrics. A temporary table will be created, in other words,
it automatically enables the -n argument.
.It Fl n, -newmetrics
Do not use the system metrics table. A temporary table will be created using the default metrics
file (PERFEXPERT_ETCDIR/METRICS_FILE).
.It Fl v, -verbose
Enable verbose mode (default level: 5).
.It Fl l, -verbose_level
Enable verbose mode using a specific verbose level.
.It Fl c, -colorful
Enable colors on verbose mode, no weird characters will appear on output files.
.It Fl h, -help
Show the help message.
.It inputfile
File to use as input for performance measurements. The format of this file can be found on
perfexpert.inputfile(5).
.It outputfile
File to use as output for recommendations (default: STDOUT).
.it workdir
Temporary directory where intermediary files for automatic performance optmization are created.
.It count
Number of optimizations
.Nm
should provide.
.It database
Database file (default: PERFEXPERT_VARDIR/RECOMMENDATION_DB).
.It metricsfile
File to define metrics different from the default one. The format of this file can be found on
perfexpert.metricsfile(5).
.It level
Verbose level (range: 1-10).
.El
.Pp
.Sh ENVIRONMENT
.Bl -tag -width "ENV_VAR_1" -inden
WARNING: environment variables are overwritten by command line arguments.
.It PERFEXPERT_RECOMMENDER_INPUT_FILE
File to use as input for performance measurements. The format of this file can be found on
perfexpert.inputfile(5). The argument -f|--inputfile overwrites this environment variable.
.It PERFEXPERT_RECOMMENDER_OUTPUT_FILE
File to use as output for recommendations (default: STDOUT). The argument -o|--outputfile overwrites this variable.
.It PERFEXPERT_RECOMMENDER_WORKDIR
Temporary directory where intermediary files for automatic performance optmization are created. If this
variable is set it enables automatic performance optomization (same as -a|--automatic argument). The argument -a
overwrites this environment variable.
.It PERFEXPERT_RECOMMENDER_REC_COUNT
Set the number of optimizations
.Nm
should provide. The argument -r|--recommendations overwrites this environment variable.
.It PERFEXPERT_RECOMMENDER_DATABASE_FILE
Set the database filename and path. The argument -d|--database overwrites this environment variable.
.It PERFEXPERT_RECOMMENDER_METRICS_FILE
Set the metrics file. The argument -m|--metricsfile overwrites this environment variable.
.It PERFEXPERT_RECOMMENDER_VERBOSE_LEVEL
Set the verbose level (range: 1-10). The argument -l|--verbose_level overwrites this environment variable.
.It PERFEXPERT_RECOMMENDER_COLORFUL
If set with value 1 this variable enables colors on the verbose output.
.El
.Sh EXIT STATUS
.Nm
exits 0 on success, 1 for general errors, and 2 when there is no optimization recommendations available. Any
other exit code, even if not specified here, should be considered as an error.
.Sh FILES
.Bl -tag -width "/Users/joeuser/Library/really_long_file_name" -compact
.It Pa PERFEXPERT_ETCDIR/METRICS_FILE
Default metrics file.
.It Pa PERFEXPERT_VARDIR/RECOMMENDATION_DB
Default database file.
.El
.Sh SEE ALSO 
.Xr perfexpert 1 ,
.Xr analyzer 1 ,
.Xr macpo 1 ,
.Xr perfexpert_pr 1 ,
.Xr perfexpert_ct 1 ,
.Xr hound 1 ,
.Xr sniffer 1 ,
.Xr perfexpert.inputfile 5 ,
.Xr perfexpert.metricsfile 5
.Sh AUTHOR
Leonardo Fialho (fialho@utexas.edu).
